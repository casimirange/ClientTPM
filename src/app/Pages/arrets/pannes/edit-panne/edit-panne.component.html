<app-title [heading]="headings +': '+ continuePanne.numero" [subheading]="subheadings" [icon]="icons" *ngIf="authority === 'super_admin'"></app-title>

<div  *ngIf="authority === 'super_admin'">
    <div class="app-inner-layout">
        <div class="app-inner-layout__wrapper">
            <div class="app-inner-layout__content card">
                <div class="card-body">
                    <h5 class="card-title">Modifier la Panne N° {{continuePanne.numero}}</h5>
                    <form [formGroup]="suitePanForm" id="signupForm" class="col-md-10 mx-auto"  >
                        <div class="form-group">
                            <h6 class="card-title text-center">Que souhaitez-vous modifier ?</h6>
                        </div>
                        <div class="form-group">
                            <div class="form-row">

                                    <div class=" col-md-4">
                                        <div class="custom-radio custom-control position-relative form-group">
                                            <input type="radio" id="exampleCustomRadio7" name="pic1" class="custom-control-input" formControlName="pic1" value="date" [(ngModel)]="piece"  >
                                            <label class="custom-control-label" for="exampleCustomRadio7">Date</label>
                                        </div>
                                    </div>
                                    <div class=" col-md-4">
                                        <div class="custom-radio custom-control position-relative form-group">
                                            <input type="radio" id="exampleCustomRadio8" name="pic1" class="custom-control-input" formControlName="pic1" value="HA" [(ngModel)]="piece"  >
                                            <label class="custom-control-label" for="exampleCustomRadio8">Période</label>
                                        </div>
                                    </div>
                                    <!--<div class="e col-md-4">-->
                                        <!--<div class="custom-radio custom-control position-relative form-group">-->
                                            <!--<input type="radio" id="exampleCustomRadio9" name="pic1" class="custom-control-input" formControlName="pic1" value="DI" [(ngModel)]="piece" >-->
                                            <!--<label class="custom-control-label" for="exampleCustomRadio9">Début d'Intervention </label>-->

                                        <!--</div>-->
                                    <!--</div>-->

                                    <!--<div class=" col-md-4">-->
                                        <!--<div class="custom-radio custom-control position-relative form-group">-->
                                            <!--<input type="radio" id="exampleCustomRadiofi" name="pic1" class="custom-control-input" formControlName="pic1" value="FI" [(ngModel)]="piece"  >-->
                                            <!--<label class="custom-control-label" for="exampleCustomRadiofi">Fin d'Intervention</label>-->
                                        <!--</div>-->
                                    <!--</div>-->
                                    <div class=" col-md-4">
                                        <div class="custom-radio custom-control position-relative form-group">
                                            <input type="radio" id="exampleCustomRadioMachine" name="pic1" class="custom-control-input" formControlName="pic1" value="Mach" [(ngModel)]="piece"  >
                                            <label class="custom-control-label" for="exampleCustomRadioMachine">Machine</label>
                                        </div>
                                    </div>
                                    <div class="e col-md-4">
                                        <div class="custom-radio custom-control position-relative form-group">
                                            <input type="radio" id="exampleCustomRadioOp" name="pic1" class="custom-control-input" formControlName="pic1" value="Op" [(ngModel)]="piece" >
                                            <label class="custom-control-label" for="exampleCustomRadioOp">Opérateur </label>

                                        </div>
                                    </div>

                                    <div class=" col-md-4">
                                        <div class="custom-radio custom-control position-relative form-group">
                                            <input type="radio" id="exampleCustomRadioTech" name="pic1" class="custom-control-input" formControlName="pic1" value="Tec" [(ngModel)]="piece" (click)="test()" >
                                            <label class="custom-control-label" for="exampleCustomRadioTech">Techniciens</label>
                                        </div>
                                    </div>
                                    <div class=" col-md-4">
                                        <div class="custom-radio custom-control position-relative form-group">
                                            <input type="radio" id="exampleCustomRadioDesc" name="pic1" class="custom-control-input" formControlName="pic1" value="Desc" [(ngModel)]="piece"  >
                                            <label class="custom-control-label" for="exampleCustomRadioDesc">Description</label>
                                        </div>
                                    </div>
                                    <div class="e col-md-4">
                                        <div class="custom-radio custom-control position-relative form-group">
                                            <input type="radio" id="exampleCustomRadioCause" name="pic1" class="custom-control-input" formControlName="pic1" value="Cause" [(ngModel)]="piece" >
                                            <label class="custom-control-label" for="exampleCustomRadioCause">Cause </label>

                                        </div>
                                    </div>

                                    <div class=" col-md-4">
                                        <div class="custom-radio custom-control position-relative form-group">
                                            <input type="radio" id="exampleCustomRadioDetail" name="pic1" class="custom-control-input" formControlName="pic1" value="Det" [(ngModel)]="piece"  >
                                            <label class="custom-control-label" for="exampleCustomRadioDetail">Détails de l'intervention</label>
                                        </div>
                                    </div>
                                    <div class=" col-md-4">
                                        <div class="custom-radio custom-control position-relative form-group">
                                            <input type="radio" id="exampleCustomRadioOutil" name="pic1" class="custom-control-input" formControlName="pic1" value="Outil" [(ngModel)]="piece"  >
                                            <label class="custom-control-label" for="exampleCustomRadioOutil">Outils Utilisés</label>
                                        </div>
                                    </div>
                                    <div class="e col-md-4" *ngIf="(continuePanne.cont == true && continuePanne.etat == true) || (continuePanne.cont == false && continuePanne.etat == false)">
                                        <div class="custom-radio custom-control position-relative form-group">
                                            <input type="radio" id="exampleCustomRadioEtat" name="pic1" class="custom-control-input" formControlName="pic1" value="Etat" [(ngModel)]="piece" >
                                            <label class="custom-control-label" for="exampleCustomRadioEtat">Etat </label>

                                        </div>
                                    </div>

                            </div>
                        </div>
                        <div class="divider"></div>
                        <div class="form-group" *ngIf="piece == 'date' ">
                            <div class="form-row">
                                <div class="col-md-6">
                                    <div class="position-relative form-group">
                                        <label for="date" >Date</label>
                                        <input type="date" id="date" class="form-control form-control-sm" formControlName="dateP" [ngClass]="{'fred': suitePanForm.controls['dateP'].invalid && (suitePanForm.controls['dateP'].touched)}" [(ngModel)]="continuePanne.date"/>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="form-group"  *ngIf="piece == 'HA'">
                            <div class="form-row" *ngIf="(continuePanne.cont == false && continuePanne.etat == true)">
                                <div class=" col-md-4">
                                    <div class="custom-radio custom-control position-relative form-group">
                                        <input type="radio" id="exampleCustomRadio77147" name="qrt" class="custom-control-input" formControlName="qrt" value="1" [(ngModel)]="periodde"  (click)="infoPanne()">
                                        <label class="custom-control-label" for="exampleCustomRadio77147">Qaurt 1</label>
                                    </div>
                                </div>
                                <div class=" col-md-4">
                                    <div class="custom-radio custom-control position-relative form-group">
                                        <input type="radio" id="exampleCustomRadio88147" name="qrt" class="custom-control-input" formControlName="qrt" value="2" [(ngModel)]="periodde"  (click)="infoPanne()">
                                        <label class="custom-control-label" for="exampleCustomRadio88147">Quart 2</label>
                                    </div>
                                </div>
                            </div>
                            <div class="form-row" *ngIf="(continuePanne.cont == false && continuePanne.etat == true) && (periodde == '1' || periodde == '2')">
                                <div class="col-md-4">
                                    <div class="position-relative form-group">
                                        <label for="ha" [ngClass]="{'red': suitePanForm.controls['heureArret'].invalid && (suitePanForm.controls['heureArret'].touched)}">Heure d'arrêt</label>
                                        <input type="datetime-local" class="form-control form-control-sm" data-toggle="timePicker" id="ha" formControlName="heureArret" [ngClass]="{'fred': suitePanForm.controls['heureArret'].invalid && (suitePanForm.controls['heureArret'].touched)}" />
                                    </div>
                                    <div>
                                        date heure: {{periodde == '1' ? (ha1| date: 'yyyy-MM-ddTHH:mm') : periodde == '2' ? (ha2 | date: 'yyyy-MM-ddTHH:mm'): ''}}
                                    </div>
                                    <div style="color: #f65656; font-style: italic;" *ngIf="suitePanForm.controls['heureArret'].invalid && (suitePanForm.controls['heureArret'].touched) ">
                                        <span>*</span> Date et heure invalide
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="position-relative form-group">
                                        <label for="di" [ngClass]="{'red': suitePanForm.controls['debutInter'].invalid && (suitePanForm.controls['debutInter'].touched)}">Début d'intervention</label>
                                        <input type="datetime-local" placeholder="Sélectionnez l'heure" id="di" class="form-control form-control-sm" formControlName="debutInter" [(ngModel)]="continuePanne.debut_inter" [ngClass]="{'fred': suitePanForm.controls['debutInter'].invalid && (suitePanForm.controls['debutInter'].touched)}">
                                    </div>
                                    <div>
                                        debut inter: {{periodde == '1' ? (di1| date: 'yyyy-MM-ddTHH:mm') : periodde == '2' ? (di2 | date: 'yyyy-MM-ddTHH:mm'): ''}}
                                    </div>

                                </div>
                                <div class="col-md-4">
                                    <div class="position-relative form-group">
                                        <label for="fi" [ngClass]="{'red': suitePanForm.controls['finInter'].invalid && (suitePanForm.controls['finInter'].touched)}">Fin d'intervention</label>
                                        <input type="datetime-local" placeholder="Sélectionnez l'heure" id="fi" class="form-control form-control-sm" formControlName="finInter" [(ngModel)]="continuePanne.fin_inter" [ngClass]="{'fred': suitePanForm.controls['finInter'].invalid && (suitePanForm.controls['finInter'].touched)}">
                                    </div>
                                    <div>
                                        fin inter: {{periodde == '1' ? (fi1| date: 'yyyy-MM-ddTHH:mm') : periodde == '2' ? (fi2 | date: 'yyyy-MM-ddTHH:mm'): ''}}
                                    </div>
                                </div>
                            </div>
                            <div class="form-row" *ngIf="(continuePanne.cont == true && continuePanne.etat == true) || (continuePanne.cont == false && continuePanne.etat == false)">
                                <div class="col-md-4">
                                    <div class="position-relative form-group">
                                        <label for="ha" [ngClass]="{'red': suitePanForm.controls['heureArret'].invalid && (suitePanForm.controls['heureArret'].touched)}">Heure d'arrêt</label>
                                        <input type="datetime-local" class="form-control form-control-sm" data-toggle="timePicker" id="ha" formControlName="heureArret" [(ngModel)]="continuePanne.heure_arret" [ngClass]="{'fred': suitePanForm.controls['heureArret'].invalid && (suitePanForm.controls['heureArret'].touched)}" />
                                    </div>
                                    <div>
                                        date heure: {{continuePanne.heure_arret | date: 'yyyy-MM-ddTHH:mm'}}
                                    </div>
                                    <div style="color: #f65656; font-style: italic;" *ngIf="suitePanForm.controls['heureArret'].invalid && (suitePanForm.controls['heureArret'].touched) ">
                                        <span>*</span> Date et heure invalide
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="position-relative form-group">
                                        <label for="di" [ngClass]="{'red': suitePanForm.controls['debutInter'].invalid && (suitePanForm.controls['debutInter'].touched)}">Début d'intervention</label>
                                        <input type="datetime-local" placeholder="Sélectionnez l'heure" id="di" class="form-control form-control-sm" formControlName="debutInter" [(ngModel)]="continuePanne.debut_inter" [ngClass]="{'fred': suitePanForm.controls['debutInter'].invalid && (suitePanForm.controls['debutInter'].touched)}">
                                    </div>
                                    <div>
                                        debut inter: {{continuePanne.debut_inter | date: 'yyyy-MM-ddTHH:mm'}}
                                    </div>

                                </div>
                                <div class="col-md-4">
                                    <div class="position-relative form-group">
                                        <label for="fi" [ngClass]="{'red': suitePanForm.controls['finInter'].invalid && (suitePanForm.controls['finInter'].touched)}">Fin d'intervention</label>
                                        <input type="datetime-local" placeholder="Sélectionnez l'heure" id="fi" class="form-control form-control-sm" formControlName="finInter" [(ngModel)]="continuePanne.fin_inter" [ngClass]="{'fred': suitePanForm.controls['finInter'].invalid && (suitePanForm.controls['finInter'].touched)}">
                                    </div>
                                    <div>
                                        fin inter: {{continuePanne.fin_inter | date: 'yyyy-MM-ddTHH:mm'}}
                                    </div>
                                </div>
                            </div>
                        </div>


                        <div class="form-group" >

                            <div class="form-row">
                                <div class="col-md-6" *ngIf="piece == 'Mach' ">
                                    <div class="form-row" *ngIf="(continuePanne.cont == false && continuePanne.etat == true)">
                                        <div class=" col-md-4">
                                            <div class="custom-radio custom-control position-relative form-group">
                                                <input type="radio" id="exampleCustomRadio770000" name="qrt" class="custom-control-input" formControlName="qrt" value="1" [(ngModel)]="machsss"  (click)="infoPanne()">
                                                <label class="custom-control-label" for="exampleCustomRadio770000">Qaurt 1</label>
                                            </div>
                                        </div>
                                        <div class=" col-md-4">
                                            <div class="custom-radio custom-control position-relative form-group">
                                                <input type="radio" id="exampleCustomRadio880000" name="qrt" class="custom-control-input" formControlName="qrt" value="2" [(ngModel)]="machsss"  (click)="infoPanne()">
                                                <label class="custom-control-label" for="exampleCustomRadio880000">Quart 2</label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="position-relative form-group">
                                        <label for="machine" [ngClass]="{'red': suitePanForm.controls['idMachine'].invalid && (suitePanForm.controls['idMachine'].touched)}">Machine</label>
                                        <select id="machine" class="form-control form-control-sm" formControlName="idMachine" [(ngModel)]="continuePanne.idMachine" [ngClass]="{'fred': suitePanForm.controls['idMachine'].invalid && (suitePanForm.controls['idMachine'].touched)}"  >
                                        <option *ngFor="let mach of machines"  [ngValue]="mach.idMachine">
                                            {{mach.code}} &nbsp; {{mach.nom}}
                                        </option>
                                        </select>
                                        machine: {{continuePanne.machine}} {{continuePanne.idMachine}}
                                    </div>

                                    <div style="color: #f65656; font-style: italic;" *ngIf="suitePanForm.controls['idMachine'].invalid && (suitePanForm.controls['idMachine'].touched) ">
                                        <span>*</span> Veuillez sélectionner la machine en panne
                                    </div>
                                </div>

                                <div class="col-md-6" *ngIf="piece == 'Op' ">
                                    <div class="form-row" *ngIf="(continuePanne.cont == false && continuePanne.etat == true)">
                                        <div class=" col-md-4">
                                            <div class="custom-radio custom-control position-relative form-group">
                                                <input type="radio" id="exampleCustomRadio770op" name="qrt" class="custom-control-input" formControlName="qrt" value="1" [(ngModel)]="ops"  (click)="infoPanne()">
                                                <label class="custom-control-label" for="exampleCustomRadio770op">Qaurt 1</label>
                                            </div>
                                        </div>
                                        <div class=" col-md-4">
                                            <div class="custom-radio custom-control position-relative form-group">
                                                <input type="radio" id="exampleCustomRadio880op" name="qrt" class="custom-control-input" formControlName="qrt" value="2" [(ngModel)]="ops"  (click)="infoPanne()">
                                                <label class="custom-control-label" for="exampleCustomRadio880op">Quart 2</label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="position-relative form-group">
                                        <label for="op" [ngClass]="{'red': suitePanForm.controls['idOperateur'].invalid && (suitePanForm.controls['idOperateur'].touched)}">Opérateur de Production</label>

                                        <div *ngIf="(continuePanne.cont == false && continuePanne.etat == true) && (ops == '1' || ops == '2')">
                                            <select id="op" class="form-control form-control-sm"  formControlName="idOperateur" [(ngModel)]="ops == '1' ? OP1.idOP : ops == '2' ? OP2.idOP: continuePanne.etat"  [ngClass]="{'fred': suitePanForm.controls['idOperateur'].invalid && (suitePanForm.controls['idOperateur'].touched)}">
                                                <option *ngFor="let op of operateurs"  [ngValue]="op.idOP">
                                                    {{op.nomOP}} &nbsp; {{op.prenomOP}}
                                                </option>
                                            </select>
                                            Opérateur: {{ops == '1' ? (OP1.idOP) : ops == '2' ? (OP2.idOP): ''}}
                                        </div>

                                        <div *ngIf="(continuePanne.cont == true && continuePanne.etat == true) || (continuePanne.cont == false && continuePanne.etat == false)">
                                            <select id="op" class="form-control form-control-sm"  formControlName="idOperateur" [(ngModel)]=" continuePanne.idOperateur" [ngClass]="{'fred': suitePanForm.controls['idOperateur'].invalid && (suitePanForm.controls['idOperateur'].touched)}">
                                                <option *ngFor="let op of operateurs"  [ngValue]="op.idOP">
                                                    {{op.nomOP}} &nbsp; {{op.prenomOP}}
                                                </option>
                                            </select>
                                            Opérateur: {{continuePanne.nomOP}} {{continuePanne.prenomOP}} id2: {{continuePanne.idOperateur}}
                                        </div>

                                    </div>
                                    <div style="color: #f65656; font-style: italic;" *ngIf="suitePanForm.controls['idOperateur'].invalid && (suitePanForm.controls['idOperateur'].touched) ">
                                        <span>*</span> Veuillez sélectionner un Opérateur de production
                                    </div>
                                </div>

                            </div>
                        </div>

<div>
                        <!--<div *ngIf="piece == 'Tec' ">-->
                            <!--<div class="form-group ">-->
                                <!--<label>Maintenanciers</label> &nbsp;-->
                                <!--<span>-->
                                    <!--<button class="border-0 btn-transition btn btn-sm btn-shadow btn-outline-primary " (click)="onAddTech()"><i class="fa fa-plus-circle"></i> Ajouter</button>-->
                                <!--</span>-->
                                <!--<div class="form-row" *ngIf="(continuePanne.cont == false && continuePanne.etat == true)">-->
                                    <!--<div class=" col-md-4">-->
                                        <!--<div class="custom-radio custom-control position-relative form-group">-->
                                            <!--<input type="radio" id="exampleCustomRadio7744" name="qrt" class="custom-control-input" formControlName="qrt" value="1" [(ngModel)]="piec"  (click)="test()">-->
                                            <!--<label class="custom-control-label" for="exampleCustomRadio7744">Qaurt 1</label>-->
                                        <!--</div>-->
                                    <!--</div>-->
                                    <!--<div class=" col-md-4">-->
                                        <!--<div class="custom-radio custom-control position-relative form-group">-->
                                            <!--<input type="radio" id="exampleCustomRadio8844" name="qrt" class="custom-control-input" formControlName="qrt" value="2" [(ngModel)]="piec"  (click)="test()">-->
                                            <!--<label class="custom-control-label" for="exampleCustomRadio8844">Quart 2</label>-->
                                        <!--</div>-->
                                    <!--</div>-->
                                <!--</div>-->
                                <!--<div class="mt-3" *ngIf="piec == 1" >-->
                                    <!--<div class="form-row" *ngFor="let tec1 of TEC1; let s = index">-->
                                        <!--<div class="col-md-5 field_wrapper">-->
                                            <!--<div class="position-relative form-group">-->
                                                <!--<label [ngClass]="{'red': suitePanForm.controls['idTechnicien'].invalid && (suitePanForm.controls['idTechnicien'].touched)}">Maintenancier N°{{s+1}}</label>-->
                                                <!--<div >-->
                                                        <!--nom: {{tec1.nomTec}} techID: {{tec1.id_technicien}} panneID: {{tec1.id_panne}}-->
                                                <!--</div>-->
                                            <!--</div>-->
                                        <!--</div>-->
                                    <!--</div>-->
                                <!--</div>-->
                                <!--<div class="mt-3" *ngIf="piec == 2" >-->
                                <!--<div class="form-row" *ngFor="let tec2 of TEC2; let s = index">-->
                                    <!--<div class="col-md-5 field_wrapper">-->
                                        <!--<div class="position-relative form-group">-->
                                            <!--<label [ngClass]="{'red': suitePanForm.controls['idTechnicien'].invalid && (suitePanForm.controls['idTechnicien'].touched)}">Maintenancier N°{{s+1}}</label>-->
                                            <!--<div >-->
                                                    <!--nom: {{tec2.nomTec}} techID: {{tec2.id_technicien}} panneID: {{tec2.id_panne}}-->
                                            <!--</div>-->
                                        <!--</div>-->
                                    <!--</div>-->

                                <!--</div>-->
                                <!--</div>-->
                            <!--</div>-->
                        <!--</div>-->
                </div>
                        <div *ngIf="piece == 'Tec'">
                            <div class="form-row" *ngIf="(continuePanne.cont == false && continuePanne.etat == true)">
                                <div class=" col-md-4">
                                    <div class="custom-radio custom-control position-relative form-group">
                                        <input type="radio" id="exampleCustomRadio7744" name="qrt" class="custom-control-input" formControlName="qrt" value="1" [(ngModel)]="technis"  (click)="test()">
                                        <label class="custom-control-label" for="exampleCustomRadio7744">Qaurt 1</label>
                                    </div>
                                </div>
                                <div class=" col-md-4">
                                    <div class="custom-radio custom-control position-relative form-group">
                                        <input type="radio" id="exampleCustomRadio8844" name="qrt" class="custom-control-input" formControlName="qrt" value="2" [(ngModel)]="technis"  (click)="test()">
                                        <label class="custom-control-label" for="exampleCustomRadio8844">Quart 2</label>
                                    </div>
                                </div>
                            </div>

                            <div >
                                <div class="form-group ">
                                    <label>Maintenanciers</label> &nbsp;
                                    <span>
                                    <button class="border-0 btn-transition btn btn-sm btn-shadow btn-outline-primary " (click)="onAddTech()"><i class="fa fa-plus-circle"></i> Ajouter</button>
                                </span>
                                </div>

                                <div class="mt-3" *ngIf="technis == '1'" >
                                    <div class="form-group" *ngFor="let tec1 of TEC1; let i = index">

                                    <div class="form-row">
                                        <div class="col-md-4">
                                            <div class="position-relative form-group">
                                                <label for="matM{{i+1}}" class="">Technicien N°{{i+1}}</label>
                                                <input type="text" class="form-control form-control-sm" disabled value="{{tec1.nomTec}}" >

                                            </div>
                                            nom: {{tec1.nomTec}}
                                        </div>
                                        <div class="col-md-3">
                                            <div class="position-relative form-group"><label for="matM{{i+1}}" class="">Matricule</label><input
                                                    name="code" id="matM{{i+1}}" type="text" placeholder="BCP002" value="{{tec1.matricule}}"
                                                    class="form-control form-control-sm" disabled></div>
                                            mat: {{tec1.matricule}}
                                        </div>
                                        <div class="col-md-3">
                                            <div class="position-relative form-group"><label for="fct{{i+1}}" class="">Fonction</label><input
                                                    name="code" id="fct{{i+1}}" type="text" placeholder="Electricien" class="form-control form-control-sm" value="{{tec1.fonction}}" disabled></div>
                                            fction: {{tec1.fonction}}
                                        </div>
                                        <div class="col-md-1">
                                            <div class="position-relative form-group">
                                                <label class="" style="color:transparent;">Fonction</label>
                                                <button class="btn-transition btn btn-sm btn-shadow btn-outline-success form-control-sm form-control" (click)="updateTec(tec1)">/</button>
                                            </div>
                                            ID: {{tec1.id_panne}}
                                        </div>
                                        <div class="col-md-1">
                                            <div class="position-relative form-group">
                                                <label class="" style="color:transparent;">Fonction</label>
                                                <button class="btn-transition btn btn-sm btn-shadow btn-outline-danger form-control-sm form-control" (click)="swl(tec1)">-</button>
                                            </div>
                                            ID: {{tec1.id_panne}}
                                        </div>
                                    </div>

                                </div>
                                </div>

                                <div class="mt-3" *ngIf="technis == '2'" >
                                    <div class="form-group" *ngFor="let tec2 of TEC2; let i = index">

                                    <div class="form-row">
                                        <div class="col-md-4">
                                            <div class="position-relative form-group">
                                                <label for="matM{{i+1}}" class="">Technicien N°{{i+1}}</label>
                                                <input type="text" class="form-control form-control-sm" disabled value="{{tec2.nomTec}}" >

                                            </div>
                                            nom: {{tec2.nomTec}}
                                        </div>
                                        <div class="col-md-3">
                                            <div class="position-relative form-group"><label for="matM{{i+1}}" class="">Matricule</label><input
                                                    name="code" id="matM{{i+1}}" type="text" placeholder="BCP002" value="{{tec2.matricule}}"
                                                    class="form-control form-control-sm" disabled></div>
                                            mat: {{tec2.matricule}}
                                        </div>
                                        <div class="col-md-3">
                                            <div class="position-relative form-group"><label for="fct{{i+1}}" class="">Fonction</label><input
                                                    name="code" id="fct{{i+1}}" type="text" placeholder="Electricien" class="form-control form-control-sm" value="{{tec2.fonction}}" disabled></div>
                                            fction: {{tec2.fonction}}
                                        </div>
                                        <div class="col-md-1">
                                            <div class="position-relative form-group">
                                                <label class="" style="color:transparent;">Fonction</label>
                                                <button class="btn-transition btn btn-sm btn-shadow btn-outline-success form-control-sm form-control" (click)="updateTec(tec2)">/</button>
                                            </div>
                                            ID: {{tec2.id_panne}}
                                        </div>
                                        <div class="col-md-1">
                                            <div class="position-relative form-group">
                                                <label class="" style="color:transparent;">Fonction</label>
                                                <button class="btn-transition btn btn-sm btn-shadow btn-outline-danger form-control-sm form-control" (click)="swl(tec2)">-</button>
                                            </div>
                                            ID: {{tec2.id_panne}}
                                        </div>
                                    </div>
                                </div>
                                </div>

                                <div class="mt-3" *ngIf="(continuePanne.cont == true && continuePanne.etat == true) || (continuePanne.cont == false && continuePanne.etat == false)">
                                    <div class="form-group" *ngFor="let tec2 of techs; let i = index">
                                        <div class="form-row">
                                        <div class="col-md-4">
                                            <div class="position-relative form-group">
                                                <label for="matM{{i+1}}" class="">Technicien N°{{i+1}}</label>
                                                <input type="text" class="form-control form-control-sm" disabled value="{{tec2.nomTec}}" >

                                            </div>
                                            nom: {{tec2.nomTec}}
                                        </div>
                                        <div class="col-md-3">
                                            <div class="position-relative form-group"><label for="matM{{i+1}}" class="">Matricule</label><input
                                                    name="code" id="matM{{i+1}}" type="text" placeholder="BCP002" value="{{tec2.matricule}}"
                                                    class="form-control form-control-sm" disabled></div>
                                            mat: {{tec2.matricule}}
                                        </div>
                                        <div class="col-md-3">
                                            <div class="position-relative form-group"><label for="fct{{i+1}}" class="">Fonction</label><input
                                                    name="code" id="fct{{i+1}}" type="text" placeholder="Electricien" class="form-control form-control-sm" value="{{tec2.fonction}}" disabled></div>
                                            fction: {{tec2.fonction}}
                                        </div>
                                        <div class="col-md-1">
                                            <div class="position-relative form-group">
                                                <label class="" style="color:transparent;">Fonction</label>
                                                <button class="btn-transition btn btn-sm btn-shadow btn-outline-success form-control-sm form-control" (click)="updateTec(tec2)">/</button>
                                            </div>
                                            ID: {{tec2.id_panne}}
                                        </div>
                                        <div class="col-md-1">
                                            <div class="position-relative form-group">
                                                <label class="" style="color:transparent;">Fonction</label>
                                                <button class="btn-transition btn btn-sm btn-shadow btn-outline-danger form-control-sm form-control" (click)="swl(tec2)">-</button>
                                            </div>
                                            ID: {{tec2.id_panne}}
                                        </div>
                                    </div>
                                    </div>
                                </div>

                                <div *ngIf="ajout == true" class="mb-3 mt-3">
                                    <select class="form-control form-control-sm"  formControlName="idtec" >
                                        <option value="" selected disabled hidden>Sélectionner un maintenancier</option>
                                        <option *ngFor="let tec of techniciens" [ngValue]="tec.idTechnicien" >
                                            {{tec.nom | uppercase}} {{tec.prenom | titlecase}}
                                        </option>
                                    </select>

                                    <!--<button class="btn btn-sm btn-outline-alternate mb-3" (click)="addTec()">ajout Tec</button>-->
                                </div>


                            </div>
                        </div>

                        <div class="form-group" *ngIf="piece == 'Desc' ">
                            <label for="desc" [ngClass]="{'red': suitePanForm.controls['description'].invalid && (suitePanForm.controls['description'].touched)}">Description du Problème</label>
                            <div>
                                <textarea rows="2" class="form-control autosize-input" style="max-height: 200px; height: 40px;" id="desc" placeholder="Description..."  formControlName="description"  [ngClass]="{'fred': suitePanForm.controls['description'].invalid && (suitePanForm.controls['description'].touched)}" [(ngModel)]="continuePanne.description"></textarea>
                            </div>
                            <div style="color: #f65656; font-style: italic;" *ngIf="suitePanForm.controls['description'].invalid && (suitePanForm.controls['description'].touched) ">
                                <span>*</span> Minimum 5 caractères sont requis
                            </div>
                        </div>



                        <div class="form-group" *ngIf="piece == 'Cause' ">
                            <div class="form-row" *ngIf="(continuePanne.cont == false && continuePanne.etat == true)">
                                <div class=" col-md-4">
                                    <div class="custom-radio custom-control position-relative form-group">
                                        <input type="radio" id="exampleCustomRadio77" name="qrt" class="custom-control-input" formControlName="qrt" value="1" [(ngModel)]="caus"  (click)="infoPanne()">
                                        <label class="custom-control-label" for="exampleCustomRadio77">Qaurt 1</label>
                                    </div>
                                </div>
                                <div class=" col-md-4">
                                    <div class="custom-radio custom-control position-relative form-group">
                                        <input type="radio" id="exampleCustomRadio88" name="qrt" class="custom-control-input" formControlName="qrt" value="2" [(ngModel)]="caus"  (click)="infoPanne()">
                                        <label class="custom-control-label" for="exampleCustomRadio88">Quart 2</label>
                                    </div>
                                </div>
                            </div>
                            <label for="cause" [ngClass]="{'red': suitePanForm.controls['cause'].invalid && (suitePanForm.controls['cause'].touched)}">Cause du Problème</label>
                            <div *ngIf="(continuePanne.cont == false && continuePanne.etat == true) && (caus == '1' || caus == '2')">
                                <textarea rows="1" class="form-control autosize-input" style="max-height: 200px; height: 40px;" id="cause" placeholder="Cause..." formControlName="cause" [(ngModel)]="caus == '1' ? cause1 : caus == '2' ? cause2 : continuePanne.etat" [ngClass]="{'fred': suitePanForm.controls['cause'].invalid && (suitePanForm.controls['cause'].touched)}"></textarea>
                            </div>
                            <div *ngIf="(continuePanne.cont == true && continuePanne.etat == true) || (continuePanne.cont == false && continuePanne.etat == false)">
                                <textarea rows="1" class="form-control autosize-input" style="max-height: 200px; height: 40px;" id="cause" placeholder="Cause..." formControlName="cause" [(ngModel)]="continuePanne.cause" [ngClass]="{'fred': suitePanForm.controls['cause'].invalid && (suitePanForm.controls['cause'].touched)}"></textarea>
                            </div>
                            {{caus == '1' ? cause1 : caus == '2' ? cause2 : ''}}
                            <div style="color: #f65656; font-style: italic;" *ngIf="suitePanForm.controls['cause'].invalid && (suitePanForm.controls['cause'].touched) ">
                                <span>*</span> Minimum 5 caractères sont requis
                            </div>
                        </div>

                        <div class="form-group" *ngIf="piece == 'Det' ">
                            <div class="form-row" *ngIf="(continuePanne.cont == false && continuePanne.etat == true)">
                                <div class=" col-md-4">
                                    <div class="custom-radio custom-control position-relative form-group">
                                        <input type="radio" id="exampleCustomRadio7017" name="qrt" class="custom-control-input" formControlName="qrt" value="1" [(ngModel)]="det"  (click)="infoPanne()">
                                        <label class="custom-control-label" for="exampleCustomRadio7017">Qaurt 1</label>
                                    </div>
                                </div>
                                <div class=" col-md-4">
                                    <div class="custom-radio custom-control position-relative form-group">
                                        <input type="radio" id="exampleCustomRadio8018" name="qrt" class="custom-control-input" formControlName="qrt" value="2" [(ngModel)]="det"  (click)="infoPanne()">
                                        <label class="custom-control-label" for="exampleCustomRadio8018">Quart 2</label>
                                    </div>
                                </div>
                            </div>
                            <label for="cause" [ngClass]="{'red': suitePanForm.controls['details'].invalid && (suitePanForm.controls['details'].touched)}">details du Problème</label>
                            <div *ngIf="(continuePanne.cont == false && continuePanne.etat == true) && (det == '1' || det == '2')">
                                <textarea rows="1" class="form-control autosize-input" style="max-height: 200px; height: 40px;" id="cause" placeholder="details..." formControlName="details" [(ngModel)]="det == '1' ? details1 : det == '2' ? details2 : continuePanne.etat" [ngClass]="{'fred': suitePanForm.controls['details'].invalid && (suitePanForm.controls['details'].touched)}"></textarea>
                            </div>
                            <div *ngIf="(continuePanne.cont == true && continuePanne.etat == true) || (continuePanne.cont == false && continuePanne.etat == false)">
                                <textarea rows="1" class="form-control autosize-input" style="max-height: 200px; height: 40px;" id="details" placeholder="details..." formControlName="details" [(ngModel)]="continuePanne.details" [ngClass]="{'fred': suitePanForm.controls['details'].invalid && (suitePanForm.controls['details'].touched)}"></textarea>
                            </div>
                            {{det == '1' ? details1 : det == '2' ? details2 : ''}}
                            <div style="color: #f65656; font-style: italic;" *ngIf="suitePanForm.controls['details'].invalid && (suitePanForm.controls['details'].touched) ">
                                <span>*</span> Minimum 5 caractères sont requis
                            </div>
                        </div>

                        <div class="form-group" *ngIf="piece == 'Outil' ">
                            <div class="form-row" *ngIf="(continuePanne.cont == false && continuePanne.etat == true)">
                                <div class=" col-md-4">
                                    <div class="custom-radio custom-control position-relative form-group">
                                        <input type="radio" id="exampleCustomRadio770" name="qrt" class="custom-control-input" formControlName="qrt" value="1" [(ngModel)]="ou"  (click)="infoPanne()">
                                        <label class="custom-control-label" for="exampleCustomRadio770">Qaurt 1</label>
                                    </div>
                                </div>
                                <div class=" col-md-4">
                                    <div class="custom-radio custom-control position-relative form-group">
                                        <input type="radio" id="exampleCustomRadio880" name="qrt" class="custom-control-input" formControlName="qrt" value="2" [(ngModel)]="ou"  (click)="infoPanne()">
                                        <label class="custom-control-label" for="exampleCustomRadio880">Quart 2</label>
                                    </div>
                                </div>
                            </div>
                            <div class="form-row" *ngIf="(continuePanne.cont == false && continuePanne.etat == true) && (ou == '1' || ou == '2')">
                                <div class="col-md-4">
                                    <div class="position-relative form-group">
                                        <label for="pieces" class="">Nom de la pièce</label>
                                        <input [(ngModel)]="ou == '1' ? (outil1) : ou == '2' ? (outil2): continuePanne.etat" name="code" id="pieces" type="text" placeholder="Ampoule"
                                               class="form-control form-control-sm" formControlName="outil" value="ou12" >
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="position-relative form-group">
                                        <label for="qtes" class="">Quantité</label>
                                        <input [(ngModel)]="ou == '1' ? (qte1) : ou == '2' ? (qte2): continuePanne.etat" name="code" id="qtes" type="number" placeholder="01"
                                               class="form-control form-control-sm" formControlName="qte" >
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="position-relative form-group">
                                        <label for="refs" class="">Référence Magasin</label>
                                        <input [(ngModel)]="ou == '1' ? (ref1) : ou == '2' ? (ref2): continuePanne.etat" name="code" id="refs" type="text" placeholder="6000157"
                                               class="form-control form-control-sm" formControlName="ref" >
                                    </div>
                                </div>
                            </div>
                            <div class="form-row" *ngIf="(continuePanne.cont == true && continuePanne.etat == true) || (continuePanne.cont == false && continuePanne.etat == false)">
                                <div class="col-md-4">
                                    <div class="position-relative form-group">
                                        <label for="piece" class="">Nom de la pièce</label>
                                        <input [(ngModel)]="continuePanne.outil" name="code" id="piece" type="text" placeholder="Ampoule"
                                               class="form-control form-control-sm" formControlName="outil" value="ou12" >
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="position-relative form-group">
                                        <label for="qte" class="">Quantité</label>
                                        <input [(ngModel)]="continuePanne.qte" name="code" id="qte" type="number" placeholder="01"
                                               class="form-control form-control-sm" formControlName="qte" >
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="position-relative form-group">
                                        <label for="ref" class="">Référence Magasin</label>
                                        <input [(ngModel)]="continuePanne.ref" name="code" id="ref" type="text" placeholder="6000157"
                                               class="form-control form-control-sm" formControlName="ref" >
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="form-group" *ngIf="piece == 'Etat'">
                            <label >Cette panne est <span [ngClass]="continuePanne.etat == true ? 'text-success' : 'text-danger'">{{continuePanne.etat == true ? ' achevée.' : ' inachevée '}}</span>{{continuePanne.etat == true ? '' : ' pour le moment'}}</label>
                            <p>cliquez sur le bouton modifier pour{{continuePanne.etat == false ? ' l\'activer.' : ' la désactiver.'}}</p>
                        </div>

                        <div class="form-group">
                            <button type="submit" class="btn-pill btn-shadow btn btn-warning text-dark"
                                    (click)="
                                             ajout == true ? addTec() :
                                             piece == 'date' ? dateUpdate() :
                                             piece == 'HA' ? haUpdate() :
                                             piece == 'DI' ? diUpdate() :
                                             piece == 'FI' ? fiUpdate() :
                                             piece == 'Mach' ? machUpdate() :
                                             piece == 'Op' ? opUpdate() :
                                             piece == 'Tec' ? TecUpdate() :
                                             piece == 'Desc' ? DescUpdate() :
                                             piece == 'Cause' ? causeUpdate() :
                                             piece == 'Det' ? DetUpdate() :
                                             piece == 'Outil' ? OutilUpdate() :
                                             piece == 'Etat' ? EtatUpdate() :
                                             endPanne()" >
                                <i class="fa fa-pencil"></i> Modifier
                            </button>
                        </div>
                    </form>
                </div>
            </div>
            <div class="app-inner-layout__sidebar card">
                <ul class="nav flex-column">
                    <li class="pt-4 pl-3 pr-3 pb-3 nav-item">
                        <a routerLink="/pannes">
                            <button class="btn-pill btn-shadow btn btn-primary btn-block">Toutes les Pannes
                            </button>
                        </a>
                    </li>
                    <li class="nav-item-header nav-item">
                        <i class="nav-link-icon fa fa-spinner fa-spin"> </i>&nbsp;&nbsp;
                        <span>Liste des pannes non achevées</span>
                    </li>

                </ul>
                <ul class="todo-list-wrapper list-group list-group-flush">
                    <li style="cursor: pointer" class="list-group-item" >
                        <div class="todo-indicator bg-warning"></div>
                        <div class="widget-content p-0">
                            <div class="widget-content-wrapper">
                                <div class="widget-content-left ml-1">
                                    <div class="widget-heading">{{continuePanne.machine}}</div>
                                    <div class="widget-subheading"><i>{{continuePanne.code}}</i></div>
                                </div>
                                <div class="widget-content-right widget-content-actions">
                                    <button class="border-0 btn-transition btn btn-outline-success">
                                        <i class="fa fa-eye"></i>
                                    </button>
                                    <button class="border-0 btn-transition btn btn-outline-primary">
                                        <i class="fa fa-pen"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!--<ng-template #mymodal let-modal>-->
                        <!--<div class="modal-header">-->
                        <!--<h6 class="modal-title timeline-title" id="modal-basic-title"><b>Panne N°:</b> {{pan.numero}}</h6>-->
                        <!--<div class="close vertical-timeline-element-content bounce-in" >-->
                        <!--<span class="timeline-title"><b>{{pan.machine}}</b></span>-->
                        <!--<p>{{pan.code}}</p>-->
                        <!--</div>-->
                        <!--</div>-->
                        <!--<div class="modal-body">-->
                        <!--<div class="tabs-animation">-->
                        <!--<div class="row">-->
                        <!--<div class="col-md-4 col-xl-4 ">-->
                        <!--<span class="timeline-title"><b>Heure Arrêt</b></span>-->
                        <!--<p>{{pan.heureArret | date: 'HH:mm'}}</p>-->
                        <!--</div>-->
                        <!--<div class="col-md-4 col-xl-4 text-center">-->
                        <!--<span class="timeline-title"><b>Début Inter</b></span>-->
                        <!--<p>{{pan.debutInter | date: 'HH:mm'}}</p>-->
                        <!--</div>-->
                        <!--<div class="col-md-4 col-xl-4 text-right">-->
                        <!--<span class="timeline-title"><b>Fin Inter</b></span>-->
                        <!--<p>{{pan.finInter | date: 'HH:mm'}}</p>-->
                        <!--</div>-->
                        <!--</div>-->
                        <!--</div>-->

                        <!--<div class="scroll-area-lg">-->
                        <!--<div class="scrollbar-container">-->
                        <!--<div class="vertical-time-icons vertical-timeline vertical-timeline&#45;&#45;animate vertical-timeline&#45;&#45;one-column">-->
                        <!--<div class="vertical-timeline-item vertical-timeline-element">-->
                        <!--<div><span class="vertical-timeline-element-icon bounce-in"><div class="timeline-icon border-success"></div></span>-->
                        <!--<div class="vertical-timeline-element-content bounce-in"><h4 class="timeline-title">Description de la panne</h4>-->
                        <!--<p>{{pan.description}}</p></div>-->
                        <!--</div>-->
                        <!--</div>-->
                        <!--<div class="vertical-timeline-item vertical-timeline-element">-->
                        <!--<div><span class="vertical-timeline-element-icon bounce-in"><div class="timeline-icon border-success"></div></span>-->
                        <!--<div class="vertical-timeline-element-content bounce-in"><h4 class="timeline-title">Cause du problème</h4>-->
                        <!--<p>{{pan.cause}}</p></div>-->
                        <!--</div>-->
                        <!--</div>-->
                        <!--<div class="vertical-timeline-item vertical-timeline-element">-->
                        <!--<div><span class="vertical-timeline-element-icon bounce-in"><div class="timeline-icon border-success"></div></span>-->
                        <!--<div class="vertical-timeline-element-content bounce-in"><h4 class="timeline-title">Détails de l'intervention</h4>-->
                        <!--<p>{{pan.details}}</p></div>-->
                        <!--</div>-->
                        <!--</div>-->
                        <!--<div class="vertical-timeline-item vertical-timeline-element">-->
                        <!--<div><span class="vertical-timeline-element-icon bounce-in"><div class="timeline-icon border-alternate"></div></span>-->
                        <!--<div class="vertical-timeline-element-content bounce-in"><h4 class="timeline-title">Opérateur de Production</h4>-->
                        <!--<p><b class="text-alternate">{{pan.matOp}}</b>:&nbsp; {{pan.prenomOP}} {{pan.nomOP}} </p>-->
                        <!--</div>-->
                        <!--</div>-->
                        <!--</div>-->
                        <!--<div class="vertical-timeline-item vertical-timeline-element">-->
                        <!--<div><span class="vertical-timeline-element-icon bounce-in"><div class="timeline-icon border-primary"></div></span>-->
                        <!--<div class="vertical-timeline-element-content bounce-in"><h4 class="timeline-title">Equipe de Maintenance</h4>-->
                        <!--<p *ngFor="let pt of Tpannes"><b class="text-primary">{{pt.matricule}}</b>:&nbsp; {{pt.preTec}} {{pt.nomTec}}-->
                        <!--<span class="float-right">-->
                        <!--{{pt.fonction}}-->
                        <!--</span>-->
                        <!--</p>-->

                        <!--</div>-->
                        <!--</div>-->
                        <!--</div>-->
                        <!--<div *ngIf="pan.outil" class="vertical-timeline-item vertical-timeline-element">-->
                        <!--<div><span class="vertical-timeline-element-icon bounce-in"><div class="timeline-icon border-warning"><i class="pe-7s-cloud-upload text-white"></i></div></span>-->
                        <!--<div class="vertical-timeline-element-content bounce-in">-->
                        <!--<h4 class="timeline-title">Outils utilisés</h4>-->
                        <!--<p><b>{{pan.qte}}</b> {{pan.outil}}: <b class="text-dark">{{pan.ref}}</b></p>                                                           </div>-->
                        <!--</div>-->
                        <!--</div>-->
                        <!--</div>-->
                        <!--</div>-->
                        <!--</div>-->
                        <!--</div>-->
                        <!--<div class="d-block clearfix modal-footer">-->
                        <!--<div class="float-left">-->
                        <!--<button class="mr-2 btn-icon btn-icon-only btn btn-outline-warning btn-sm">Modifier</button>-->
                        <!--</div>-->
                        <!--<div class="float-right">-->
                        <!--<button class="mr-2 btn-icon btn-icon-only btn btn-outline-danger btn-sm" (click)="modal.close('save click')">Annuler</button>-->
                        <!--<a [routerLink]="['/continue-panne', pan.numero]">-->
                        <!--<button class="btn-wide btn-shadow btn btn-primary btn-sm">Continuer</button>-->
                        <!--</a>-->
                        <!--</div>-->
                        <!--&lt;!&ndash;<button class="btn btn-primary" type="button" (click)="modal.close('save click')">Fermer</button>&ndash;&gt;-->
                        <!--</div>-->
                        <!--</ng-template>-->
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>

